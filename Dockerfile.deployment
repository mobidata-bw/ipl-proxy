FROM python:3.11

WORKDIR /app

EXPOSE 8080

RUN adduser -S -D user && chown user /app
USER user

COPY addons.py ./addons.py

COPY requirements.txt .
RUN pip install -r requirements.txt

COPY app ./app

CMD ["mitmdump", "-s", "addons.py"]
